(function(){
  function safeLog(){ try{ if(window.console&&console.log) console.log.apply(console, arguments);}catch(e){} }
  function onReady(fn){ if(document.readyState==='loading'){ document.addEventListener('DOMContentLoaded', fn);} else { fn(); } }
  onReady(function(){
    safeLog('[Legacy] vulnerability-charts fallback initialized');
    var chartsSection = document.getElementById('charts');
    if(chartsSection){
      var msg = document.createElement('div');
      msg.className = 'alert alert-warning';
      msg.setAttribute('role','status');
      msg.setAttribute('aria-live','polite');
      msg.innerHTML = 'Gráficos indisponíveis no modo legacy. Atualize seu navegador para visualizar.';
      chartsSection.insertBefore(msg, chartsSection.firstChild);
    }
  });
})();