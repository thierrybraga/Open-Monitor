{% extends "core/base.html" %}

{% block title %}Recuperar Senha - Open Monitor{% endblock %}

{% block meta_description %}Recupere o acesso à sua conta com um link seguro enviado por e-mail. Processo simples e protegido no Open Monitor.{% endblock %}
{% block meta_keywords %}recuperar senha, redefinir senha, acesso à conta, segurança, Open Monitor{% endblock %}
{% block og_title %}Recuperar Senha{% endblock %}
{% block og_description %}Receba um link seguro para redefinir sua senha no Open Monitor.{% endblock %}

{% block extra_css %}{% endblock %}

{% block extra_head %}
<link rel="canonical" href="{{ url_for('auth.forgot_password', _external=True) }}">
<meta name="robots" content="noindex, nofollow">
{% endblock %}

{% block content %}
<div class="auth-container">
    <div class="auth-card">
        <div class="auth-header">
            <h1 class="mb-2">Recuperar senha</h1>
            <p class="text-muted">Informe seu e-mail para receber um link de redefinição.</p>
        </div>
        
        <form method="POST" class="auth-form" novalidate>
            {{ csrf_token() }}
            
            <div class="form-group">
                <label for="email" class="form-label required">E-mail</label>
                <input type="email" id="email" name="email" class="form-control" required 
                       placeholder="seu@email.com" 
                       value="{{ request.form.email or '' }}"
                       autocomplete="email" inputmode="email" aria-describedby="emailHelp emailFeedback">
                <div class="invalid-feedback" id="emailFeedback"></div>
                <small id="emailHelp" class="form-text text-muted">Enviaremos um link seguro para redefinir sua senha.</small>
            </div>

            <div class="help-panel active mt-2" aria-live="polite">
              <ul class="help-list list-unstyled">
                <li><i class="bi bi-envelope-open"></i> Verifique também a pasta de spam.</li>
                <li><i class="bi bi-shield-lock"></i> Não compartilhe seu link de recuperação.</li>
                <li><i class="bi bi-clock"></i> O link de recuperação pode expirar após algum tempo.</li>
              </ul>
            </div>
            
            <button type="submit" class="btn btn-primary btn-full" id="forgot-btn" aria-live="polite">
                <span class="btn-text"><i class="bi bi-envelope me-2"></i> Enviar link de recuperação</span>
                <span class="btn-loading" style="display: none;">
                    <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                    Enviando...
                </span>
            </button>
        </form>
        
        <div class="auth-footer">
            <p><a href="{{ url_for('main.index') }}">Voltar ao Início</a></p>
            <p>Não tem conta? <a href="{{ url_for('auth.register') }}">Criar Conta</a></p>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/pages/forgot-password.js') }}" defer nonce="{{ nonce }}"></script>
{% endblock %}
